<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dell Technologies â€“ Authorization</title>
    <link>https://dell.github.io/csm-docs/v3/authorization/</link>
    <description>Recent content in Authorization on Dell Technologies</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    
	  <atom:link href="https://dell.github.io/csm-docs/v3/authorization/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>V3: Design</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/design/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/design/</guid>
      <description>
        
        
        

&lt;div class=&#34;pageinfo pageinfo-primary&#34;&gt;
&lt;p&gt;The CSM Authorization karavictl CLI is no longer actively maintained or supported. It will be deprecated in CSM 2.0.&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;Container Storage Modules (CSM) for Authorization is designed as a service mesh solution and consists of many internal components that work together in concert to achieve its overall functionality.&lt;/p&gt;
&lt;p&gt;This document provides an overview of the major components, including how they fit together and pointers to implementation details.&lt;/p&gt;
&lt;p&gt;If you are a developer who is new to CSM for Authorization and want to build a mental map of how it works, you&amp;rsquo;re in the right place.&lt;/p&gt;
&lt;h2 id=&#34;terminology&#34;&gt;Terminology&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Service Mesh&lt;/strong&gt; - An infrastructure layer consisting of proxies that intercept and route requests between existing services.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CSI&lt;/strong&gt; - Acronym for the Container Storage Interface.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Proxy (L7)&lt;/strong&gt; - A gateway between networked services that inspects request traffic.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sidecar Proxy&lt;/strong&gt; - A service mesh proxy that runs alongside existing services, rather than within them.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pod&lt;/strong&gt; - A Kubernetes abstraction for a set of related containers that are to be considered as one unit.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tenant&lt;/strong&gt; - A named persona who owns a Kubernetes cluster and is considered the &amp;ldquo;client-side&amp;rdquo; user.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Storage Administrator&lt;/strong&gt; - A named persona who owns a storage array and is considered the admin user.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;birds-eye-view&#34;&gt;Bird&amp;rsquo;s Eye View&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;+-----------------------------------+                                                                                 
|   Kubernetes                      |                                                                                 
|                                   |                                                                                 
|  +---------+         +---------+  |            +---------------+                                            
|  | CSI     |         | Sidecar |  |            | CSM           |              +---------+        
|  | Driver  |---------&amp;gt; Proxy   |---------------&amp;gt; Authorization |--------------&amp;gt; Storage |                              
|  +---------+         +---------+  |            | Server        |              | Array   |                              
|                                   |            +---------------+              +---------+                              
+-----------------------------------+                  ^                                                              
                                                       |                                                              
                                                       |                                                              
                                                       |                                                              
                                                 +------------+                                                       
                                                 |  karavictl |                                                       
                                                 |  CLI       |                                                       
                                                 +------------+                                                 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Arrows indicate request or connection initiation, not necessarily data flow direction.&lt;/p&gt;
&lt;p&gt;The sections below explain each component in the diagram.&lt;/p&gt;
&lt;h3 id=&#34;kubernetes&#34;&gt;Kubernetes&lt;/h3&gt;
&lt;p&gt;The architecture assumes a Kubernetes cluster that intends to offer external storage to applications hosted therein.
The mechanism for managing this storage would utilize a CSI Driver.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Architecture Invariant&lt;/strong&gt;: We assume there may be many Kubernetes clusters, potentially containing multiple CSI Drivers each with their own Sidecar Proxy.&lt;/p&gt;
&lt;h3 id=&#34;csi-driver&#34;&gt;CSI Driver&lt;/h3&gt;
&lt;p&gt;A CSI Driver supports the Container Service Interface (CSI) specification. Dell provides customers with CSI Drivers for its various storage arrays.
CSM for Authorization intends to support a majority, if not all, of these drivers.&lt;/p&gt;
&lt;p&gt;A CSI Driver will typically be configured to communicate directly to its intended storage array and as such will be limited in using only the authentication
methods supported by the Storage Array itself, e.g. Basic authentication over TLS.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Architecture Invariant&lt;/strong&gt;: We try to avoid having to make any code changes to the CSI Driver when adding support for it. Any CSI Driver should ideally not be aware that it is communicating to the Sidecar Proxy.&lt;/p&gt;
&lt;h3 id=&#34;sidecar-proxy&#34;&gt;Sidecar Proxy&lt;/h3&gt;
&lt;p&gt;The CSM for Authorization Sidecar Proxy is deployed as a sidecar in the CSI Driver&amp;rsquo;s Pod. It acts as a proxy and forwards all requests to a
CSM Authorization Server.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/design/#csi-driver&#34;&gt;CSI Driver section&lt;/a&gt; noted the limitation of a CSI Driver using Storage Array supported authentication methods only. By nature of being a proxy, the CSM for Authorization
Sidecar Proxy is able to override the Authorization HTTP header for outbound requests to use Bearer tokens. Such tokens are managed by CSM for Authorization as will
be described later in this document.&lt;/p&gt;
&lt;h3 id=&#34;csm-for-authorization-server&#34;&gt;CSM for Authorization Server&lt;/h3&gt;
&lt;p&gt;The CSM for Authorization Server is, at its core, a Layer 7 proxy for intercepting traffic between a CSI Driver and a Storage Array.&lt;/p&gt;
&lt;p&gt;Inbound requests are expected to originate from the CSM for Authorization Sidecar Proxy, for the following reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Processing a set of agreed upon HTTP headers (added by the CSM for Authorization Sidecar Proxy) to assist in routing traffic to the intended Storage Array.&lt;/li&gt;
&lt;li&gt;Inspection of CSM-specific Authorization Bearer tokens.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;csm-for-authorization-cli&#34;&gt;CSM for Authorization CLI&lt;/h3&gt;
&lt;p&gt;The &lt;a href=&#34;../cli&#34;&gt;&lt;em&gt;karavictl&lt;/em&gt;&lt;/a&gt; CLI (Command Line Interface) application allows Storage Admins to manage and interact with a running CSM for Authorization Server.&lt;/p&gt;
&lt;h3 id=&#34;storage-array&#34;&gt;Storage Array&lt;/h3&gt;
&lt;p&gt;A Storage Array is typically considered to be one of the various Dell storage offerings, e.g. Dell PowerFlex which is supported by CSM for Authorization
today.  Support for more Storage Arrays will come in the future.&lt;/p&gt;
&lt;h2 id=&#34;how-it-works&#34;&gt;How it Works&lt;/h2&gt;
&lt;p&gt;CSM for Authorization intends to override the existing authorization methods between a CSI Driver and its Storage Array. This may be desirable for several reasons, if:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The CSI Driver requires privileged login credentials (e.g. &amp;ldquo;root&amp;rdquo;) in order to function.&lt;/li&gt;
&lt;li&gt;The Storage Array does not natively support the concept of RBAC and/or multi-tenancy.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This section of of the document describes how CSM for Authorization provides a solution to these problems.&lt;/p&gt;
&lt;h3 id=&#34;bearer-tokens&#34;&gt;Bearer Tokens&lt;/h3&gt;
&lt;p&gt;CSM for Authorization overrides any existing authorization mechanism between a CSI Driver and its corresponding Storage Array with the use of JSON Web Tokens (JWTs). The CSI Driver and Storage Array will not be aware of this taking place.&lt;/p&gt;
&lt;p&gt;In the context of &lt;a href=&#34;https://tools.ietf.org/html/rfc6749#section-1.5&#34;&gt;RFC-6749&lt;/a&gt; there are two such JWTs that are used:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Access token: a single token valid for a short period of time.&lt;/li&gt;
&lt;li&gt;Refresh token: a single token used to obtain access tokens.  Typically valid for a longer period of time.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Both tokens are opaque to the client, yet provide meaningful information to the server, specifically:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The Tenant for whom the token is associated with.&lt;/li&gt;
&lt;li&gt;The Roles that are bound to the Tenant.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tokens encode the following set of claims:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;aud&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;karavi&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;exp&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1915585883&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;iss&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;com.dell.karavi&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;sub&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;karavi-tenant&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;roles&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;role-a,role-b,role-c&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;group&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Tenant-1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Both tokens are signed using a server-side secret preventing the risk of tampering by any client. For example, a bad-actor is unable to modify a token to give themselves a role that they should not have, at least without knowing the server-side secret.&lt;/p&gt;
&lt;p&gt;The refresh approach is beneficial for the following reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Accidental exposure of an access token poses a lesser security concern, given the set expiration time is short (e.g. 30 seconds).&lt;/li&gt;
&lt;li&gt;The CSM for Authorization Server can fully trust the access token without having to perform a database check on each request (doing so would nullify the benefits of using tokens in the first place).&lt;/li&gt;
&lt;li&gt;The CSM for Authorization Server can defer Tenant checks at refresh time only, e.g. do not allow refresh if the Tenant&amp;rsquo;s access has been revoked by a Storage Admin. There may be a short time window in between revocation and enforcement, depending on the access token&amp;rsquo;s expiration time.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The following diagram shows the access and refresh tokens in play and how a valid access token is required for a request to be proxied to the intended Storage Array.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  +---------+                                           +---------------+
  |         |                                           |               |
  |         |                                           |               |       +----------+
  |         |--(A)------------ Access Token -----------&amp;gt;|               |------&amp;gt;|          |
  |         |                                           |     CSM       |       |          |
  |         |&amp;lt;-(B)---------- Protected Resource --------| Authorization |&amp;lt;------|  Storage |
  | Sidecar |                                           |     Server    |       |   Array  |
  | Proxy   |--(C)------------ Access Token -----------&amp;gt;|               |       |          |
  |         |                                           |               |       |          |
  |         |&amp;lt;-(D)------ Invalid Token Error -----------|               |       |          |
  |         |                                           |               |       +----------+
  |         |                                           |               |
  |         |--(E)----------- Refresh Token -----------&amp;gt;|               |
  |         |            &amp;amp; Expired Access Token         |               |
  |         |&amp;lt;-(F)----------- Access Token -------------|               |
  +---------+                                           +---------------+
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;A) CSI Driver makes a request to the Storage Array:
&lt;ul&gt;
&lt;li&gt;request is intercepted by the Sidecar Proxy to add the access token.&lt;/li&gt;
&lt;li&gt;The CSM for Authorization Server deems the access token valid.&lt;/li&gt;
&lt;li&gt;The CSM for Authorization Server permits the request to be proxied to the intended Storage Array.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;B) Storage Array response is sent back as expected.&lt;/li&gt;
&lt;li&gt;C) CSI Driver makes a request to the Storage Array:
&lt;ul&gt;
&lt;li&gt;request is intercepted by the Sidecar Proxy to add the access token.&lt;/li&gt;
&lt;li&gt;The CSM for Authorization Server deems the access token is invalid; it has since expired.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;D) The CSM for Authorization Server responds with HTTP 401 Unauthorized.&lt;/li&gt;
&lt;li&gt;E) Sidecar Proxy requests a new access token by passing both refresh token and expired token.&lt;/li&gt;
&lt;li&gt;F) The CSM for Authorization Server processes the request:
&lt;ul&gt;
&lt;li&gt;is the refresh token valid?&lt;/li&gt;
&lt;li&gt;is the access token expired?&lt;/li&gt;
&lt;li&gt;has the Tenant had access revoked?&lt;/li&gt;
&lt;li&gt;a new access token is sent in response if the checks pass.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;roles&#34;&gt;Roles&lt;/h3&gt;
&lt;p&gt;So we know a token encodes both the identification of a Tenant and their Roles, but what&amp;rsquo;s in a Role?&lt;/p&gt;
&lt;p&gt;A role can be defined as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It has a name, e.g. &amp;ldquo;role-a&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;It can be bound to a Tenant&lt;/li&gt;
&lt;li&gt;It can be unbound from a Tenant.&lt;/li&gt;
&lt;li&gt;It determines access to zero or more storage pools and assigns a storage quota for each.
&lt;ul&gt;
&lt;li&gt;Quota represents the upper-limit of the total aggregation of used storage capacity for a Tenant&amp;rsquo;s resources in a storage pool.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;It prevents ambiguity by identifying each storage pool in the form of &lt;em&gt;system-type:system-id:pool-name&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Below is an example of how roles are represented internally in JSON:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;Developer&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;system_types&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;powerflex&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;system_ids&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;542a2d5f5122210f&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;pool_quotas&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;bronze&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;99000000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This role says &lt;em&gt;Allow Tenants with the Developer role access to the bronze pool on PowerFlex system 542a2d5f5122210f, and cap their total capacity usage at 99000000Kb (99Gb).&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;policy&#34;&gt;Policy&lt;/h3&gt;
&lt;p&gt;CSM for Authorization leverages the &lt;a href=&#34;https://www.openpolicyagent.org/&#34;&gt;Open Policy Agent&lt;/a&gt; to use a policy-as-code approach to policy management. It stores a collection of policy files written in Rego language.  Each policy file defines a set of policy rules that form the basis of a policy decision. A policy decision is made by processing the inputs provided. For CSM for Authorization, the inputs are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The set of roles defined by the Storage Admin.&lt;/li&gt;
&lt;li&gt;The claims section of a validated JWT.&lt;/li&gt;
&lt;li&gt;The JSON payload of the storage request.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Given these inputs, many decisions can be made to answer questions like &amp;ldquo;Can Tenant X, with &lt;em&gt;these&lt;/em&gt; roles provision &lt;em&gt;this&lt;/em&gt; volume of size Y?&amp;rdquo;.  The result of the policy decision will determine whether or not the request is proxied.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;                 +----------------+                   
                  |   Open Policy  |                   
                  |     Agent      |                   
                  |                |                   
  JWT             |   +--------+   |                   
 Claims ------\   |   | Policy | ----------&amp;gt; Allow/Deny
               -----&amp;gt; | (Rego) |   |                   
 Storage       -----&amp;gt; +--------+   |                   
 Request -----/   +-------^--------+                   
                          |                            
                          |                            
                          |                            
                        Role                           
                        Data                           
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;quota--volume-ownership&#34;&gt;Quota &amp;amp; Volume Ownership&lt;/h3&gt;
&lt;p&gt;Policy decisions based on the current request and set of roles alone are not enough.  CSM for Authorization must maintain a cache of volumes approved for creation and deletion in order to know if a Tenant has already consumed their quota on a given storage pool.&lt;/p&gt;
&lt;p&gt;A Redis database is used to store this volume data and their relationship with a Tenant, Storage Array and Pool. The use of composite keys provide fast, constant time look up of volumes, e.g. &lt;code&gt;quota:powerflex:542a2d5f5122210f:bronze:Tenant-1:data&lt;/code&gt; is a Redis hash with volume data as its values.&lt;/p&gt;
&lt;h2 id=&#34;cross-cutting-concerns&#34;&gt;Cross-Cutting Concerns&lt;/h2&gt;
&lt;p&gt;This section documents the pieces of code that are general in nature and shared across multiple packages.&lt;/p&gt;
&lt;h3 id=&#34;logging&#34;&gt;Logging&lt;/h3&gt;
&lt;p&gt;CSM for Authorization uses the &lt;a href=&#34;https://github.com/sirupsen/logrus&#34;&gt;Logrus&lt;/a&gt; package when logging messages.&lt;/p&gt;
&lt;h2 id=&#34;observability&#34;&gt;Observability&lt;/h2&gt;
&lt;p&gt;Both the CSM for Authorization Server and Sidecar Proxy are long-running processes, so it&amp;rsquo;s important to understand what&amp;rsquo;s going on inside. We use OpenTelemetry (otel) to help with that.&lt;/p&gt;
&lt;p&gt;The following otel exporters are used:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;go.opentelemetry.io/otel/exporters/metric/prometheus&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;go.opentelemetry.io/otel/exporters/trace/zipkin&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
    <item>
      <title>V3: Backup and Restore</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/backup-and-restore/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/backup-and-restore/</guid>
      <description>
        
        
        &lt;p&gt;Backup and Restore information for CSM Authorization can be found in this section.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>V3: Configuration</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/configuration/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/configuration/</guid>
      <description>
        
        
        &lt;p&gt;This section provides the details and instructions on how to configure CSM Authorization.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>V3: Deployment</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/deployment/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/deployment/</guid>
      <description>
        
        
        &lt;p&gt;Installation information for CSM Authorization can be found in this section.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>V3: Uninstallation</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/uninstallation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/uninstallation/</guid>
      <description>
        
        
        

&lt;div class=&#34;pageinfo pageinfo-primary&#34;&gt;
&lt;p&gt;The CSM Authorization RPM is no longer actively maintained or supported. It will be deprecated in CSM 2.0. It is highly recommended that you use CSM Authorization Helm deployment or CSM Operator going forward.&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;This section outlines the uninstallation steps for Container Storage Modules (CSM) for Authorization.&lt;/p&gt;
&lt;h2 id=&#34;uninstalling-the-rpm&#34;&gt;Uninstalling the RPM&lt;/h2&gt;
&lt;p&gt;To uninstall the rpm package on the system, you must first uninstall the K3s SELinux package if SELinux is enabled. To uninstall the K3s SELinux package, run:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rpm -e k3s-selinux
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;To uninstall the CSM Authorization rpm package on the system, run:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rpm -e &amp;lt;rpm_file_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;uninstalling-the-sidecar-proxy-in-the-csi-driver&#34;&gt;Uninstalling the sidecar-proxy in the CSI Driver&lt;/h2&gt;
&lt;p&gt;To uninstall the sidecar-proxy in the CSI Driver, &lt;a href=&#34;../../csidriver/uninstall&#34;&gt;uninstall&lt;/a&gt; the driver and &lt;a href=&#34;../../deployment&#34;&gt;reinstall&lt;/a&gt; the driver using the original configuration secret.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>V3: Upgrade</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/upgrade/</guid>
      <description>
        
        
        

&lt;div class=&#34;pageinfo pageinfo-primary&#34;&gt;
&lt;p&gt;The CSM Authorization RPM is no longer actively maintained or supported. It will be deprecated in CSM 2.0. It is highly recommended that you use CSM Authorization Helm deployment or CSM Operator going forward.&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;This section outlines the upgrade steps for Container Storage Modules (CSM) for Authorization.  The upgrade of CSM for Authorization is handled in 2 parts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Upgrading the CSM for Authorization proxy server&lt;/li&gt;
&lt;li&gt;Upgrading the Dell CSI drivers with CSM for Authorization enabled&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;upgrading-csm-for-authorization-proxy-server&#34;&gt;Upgrading CSM for Authorization proxy server&lt;/h3&gt;
&lt;p&gt;Obtain the latest single binary installer RPM by following one of our two options &lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/deployment/#single-binary-installer&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To update the rpm package on the system, run the below command from within the extracted folder:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sh install_karavi_auth.sh --upgrade
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;As an option, on version 1.6.0, the Nodeports for the ingress controller can be specified:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sh install_karavi_auth.sh --upgrade  --traefik_web_port &amp;lt;web port number&amp;gt; --traefik_websecure_port &amp;lt;websecure port number&amp;gt;

Ex.:

sh install_karavi_auth.sh --upgrade  --traefik_web_port 30001 --traefik_websecure_port 30002
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;To verify that the new version of the rpm is installed and K3s has been updated, run the below commands:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rpm -qa | grep karavi
k3s kubectl version
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: The above steps manage install and upgrade of all dependencies that are required by the CSM for Authorization proxy server.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;upgrading-dell-csi-drivers-with-csm-for-authorization-enabled&#34;&gt;Upgrading Dell CSI Driver(s) with CSM for Authorization enabled&lt;/h3&gt;
&lt;p&gt;Given a setup where the CSM for Authorization proxy server is already upgraded to the latest version, follow the upgrade instructions for the applicable CSI Driver(s) to upgrade the driver and the CSM for Authorization sidecar&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;../../csidriver/upgradation/drivers/powerflex/&#34;&gt;Upgrade PowerFlex CSI driver&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;../../csidriver/upgradation/drivers/powermax/&#34;&gt;Upgrade PowerMax CSI driver&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;../../csidriver/upgradation/drivers/isilon/&#34;&gt;Upgrade PowerScale CSI driver&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;rollback&#34;&gt;Rollback&lt;/h2&gt;
&lt;p&gt;This section outlines the rollback steps for Container Storage Modules (CSM) for Authorization.&lt;/p&gt;
&lt;h3 id=&#34;rollback-csm-for-authorization-proxy-server&#34;&gt;Rollback CSM for Authorization proxy server&lt;/h3&gt;
&lt;p&gt;To rollback the rpm package on the system, run the below command:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rpm -Uvh --oldpackage karavi-authorization-&amp;lt;old_version&amp;gt;.x86_64.rpm --nopreun --nopostun
&lt;/code&gt;&lt;/pre&gt;
      </description>
    </item>
    
    <item>
      <title>V3: CLI</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/cli/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/cli/</guid>
      <description>
        
        
        

&lt;div class=&#34;pageinfo pageinfo-primary&#34;&gt;
&lt;p&gt;The CSM Authorization karavictl CLI is no longer actively maintained or supported. It will be deprecated in CSM 2.0.&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;karavictl is a command-line interface (CLI) used to interact with and manage your Container Storage Modules (CSM) Authorization deployment.
This document outlines all karavictl commands, their intended use, options that can be provided to alter their execution, and expected output from those commands.&lt;/p&gt;
&lt;p&gt;If you feel that something is unclear or missing in this document, please open up an &lt;a href=&#34;https://github.com/dell/csm/issues&#34;&gt;issue&lt;/a&gt;.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Command&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl&#34;&gt;karavictl&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;karavictl is used to interact with CSM Authorization Server&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-cluster-info&#34;&gt;karavictl cluster-info&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Display the state of resources within the cluster&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-generate&#34;&gt;karavictl generate&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Generate resources for use with CSM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-generate-token&#34;&gt;karavictl generate token&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Generate tokens&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-role&#34;&gt;karavictl role&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Manage role&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-role-get&#34;&gt;karavictl role get&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Get role&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-role-list&#34;&gt;karavictl role list&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;List roles&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-role-create&#34;&gt;karavictl role create&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Create one or more CSM roles&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-role-update&#34;&gt;karavictl role update&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Update the quota of one or more CSM roles&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-role-delete&#34;&gt;karavictl role delete&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Delete role&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-rolebinding&#34;&gt;karavictl rolebinding&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Manage role bindings&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-rolebinding-create&#34;&gt;karavictl rolebinding create&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Create a rolebinding between role and tenant&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-rolebinding-delete&#34;&gt;karavictl rolebinding delete&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Delete a rolebinding between role and tenant&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-storage&#34;&gt;karavictl storage&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Manage storage systems&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-storage-get&#34;&gt;karavictl storage get&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Get details on a registered storage system&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-storage-list&#34;&gt;karavictl storage list&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;List registered storage systems&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-storage-create&#34;&gt;karavictl storage create&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Create and register a storage system&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-storage-update&#34;&gt;karavictl storage update&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Update a registered storage system&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-storage-delete&#34;&gt;karavictl storage delete&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Delete a registered storage system&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-tenant&#34;&gt;karavictl tenant &lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Manage tenants&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-tenant-create&#34;&gt;karavictl tenant create&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Create a tenant resource within CSM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-tenant-get&#34;&gt;karavictl tenant get&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Get a tenant resource within CSM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-tenant-list&#34;&gt;karavictl tenant list&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Lists tenant resources within CSM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-tenant-revoke&#34;&gt;karavictl tenant revoke&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Get a tenant resource within CSM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-tenant-delete&#34;&gt;karavictl tenant delete&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Deletes a tenant resource within CSM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/cli/#karavictl-tenant-update&#34;&gt;karavictl tenant update&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Updates a tenant resource within CSM&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;general-commands&#34;&gt;General Commands&lt;/h2&gt;
&lt;h3 id=&#34;karavictl&#34;&gt;karavictl&lt;/h3&gt;
&lt;p&gt;karavictl is used to interact with CSM Authorization Server&lt;/p&gt;
&lt;h5 id=&#34;synopsis&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;karavictl provides security, RBAC, and quota limits for accessing Dell
storage products from Kubernetes clusters&lt;/p&gt;
&lt;h5 id=&#34;options&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
  -h, --help            help for karavictl
  -t, --toggle          Help message for toggle
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output&#34;&gt;Output&lt;/h5&gt;
&lt;p&gt;Outputs help text&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-cluster-info&#34;&gt;karavictl cluster-info&lt;/h3&gt;
&lt;p&gt;Display the state of resources within the cluster&lt;/p&gt;
&lt;h5 id=&#34;synopsis-1&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Prints table of resources within the cluster, including their readiness&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl cluster-info [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-1&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help    help for cluster-info
  -w, --watch   Watch for changes
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-1&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl cluster-info
NAME                   READY   UP-TO-DATE   AVAILABLE   AGE
github-auth-provider   1/1     1            1           59m
tenant-service         1/1     1            1           59m
redis-primary          1/1     1            1           59m
proxy-server           1/1     1            1           59m
redis-commander        1/1     1            1           59m
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-generate&#34;&gt;karavictl generate&lt;/h3&gt;
&lt;p&gt;Generate resources for use with CSM&lt;/p&gt;
&lt;h5 id=&#34;synopsis-2&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Generates resources for use with CSM&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl generate [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-2&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for generate
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-1&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-2&#34;&gt;Output&lt;/h5&gt;
&lt;p&gt;Outputs help text&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-generate-token&#34;&gt;karavictl generate token&lt;/h3&gt;
&lt;p&gt;Generate tokens&lt;/p&gt;
&lt;h5 id=&#34;synopsis-3&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Generate tokens for use with the CSI Driver when in proxy mode
The tokens are output as a Kubernetes Secret resource, so the results may
be piped directly to kubectl:&lt;/p&gt;
&lt;p&gt;Example: karavictl generate token | kubectl apply -f -&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl generate token [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-3&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string            host:port address (default &amp;#34;grpc.gatekeeper.cluster:443&amp;#34;)
      --from-config string     File providing self-generated token information
  -h, --help                   help for token
      --tenant                 Tenant name 
      --shared-secret string   Shared secret for token signing
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-2&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-3&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl generate token --shared-secret supersecret

apiVersion: v1
kind: Secret
metadata:
  name: proxy-authz-tokens
  namespace: vxflexos
type: Opaque
data:
  access: &amp;lt;ACCESS-TOKEN&amp;gt;
  refresh: &amp;lt;REFRESH-TOKEN&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Usually, you will want to pipe the output to kubectl to apply the secret&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl generate token --shared-secret supersecret | kubectl apply -f -
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;role-commands&#34;&gt;Role Commands&lt;/h2&gt;
&lt;h3 id=&#34;karavictl-role&#34;&gt;karavictl role&lt;/h3&gt;
&lt;p&gt;Manage roles&lt;/p&gt;
&lt;h5 id=&#34;synopsis-4&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Manage roles&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl role [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-4&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for role
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-3&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-4&#34;&gt;Output&lt;/h5&gt;
&lt;p&gt;Outputs help text&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-role-get&#34;&gt;karavictl role get&lt;/h3&gt;
&lt;p&gt;Get role&lt;/p&gt;
&lt;h5 id=&#34;synopsis-5&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Get role&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl role get [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-5&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for get
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-4&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-5&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl role get CSISilver

{
  &amp;#34;Name&amp;#34;: &amp;#34;CSISilver&amp;#34;,
  &amp;#34;StorageSystem&amp;#34;: &amp;#34;3000000000011111&amp;#34;,
  &amp;#34;PoolQuotas&amp;#34;: [
    {
      &amp;#34;Pool&amp;#34;: &amp;#34;mypool&amp;#34;,
      &amp;#34;Quota&amp;#34;: &amp;#34;16 GB&amp;#34;
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-role-list&#34;&gt;karavictl role list&lt;/h3&gt;
&lt;p&gt;List roles&lt;/p&gt;
&lt;h5 id=&#34;synopsis-6&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;List roles&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl role list [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-6&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for list
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-5&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-6&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl role list

{
  &amp;#34;CSIGold&amp;#34;: [
    {
      &amp;#34;storage_system_id&amp;#34;: &amp;#34;3000000000011111&amp;#34;,
      &amp;#34;pool_quotas&amp;#34;: [
        {
          &amp;#34;pool&amp;#34;: &amp;#34;mypool&amp;#34;,
          &amp;#34;quota&amp;#34;: 32000000
        }
      ]
    }
  ],
  &amp;#34;CSISilver&amp;#34;: [
    {
      &amp;#34;storage_system_id&amp;#34;: &amp;#34;3000000000011111&amp;#34;,
      &amp;#34;pool_quotas&amp;#34;: [
        {
          &amp;#34;pool&amp;#34;: &amp;#34;mypool&amp;#34;,
          &amp;#34;quota&amp;#34;: 16000000
        }
      ]
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-role-create&#34;&gt;karavictl role create&lt;/h3&gt;
&lt;p&gt;Create one or more CSM roles&lt;/p&gt;
&lt;h5 id=&#34;synopsis-7&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Creates one or more CSM roles&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl role create [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-7&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -f, --from-file string   role data from a file
      --role strings       role in the form &amp;lt;name&amp;gt;=&amp;lt;type&amp;gt;=&amp;lt;id&amp;gt;=&amp;lt;pool&amp;gt;=&amp;lt;quota&amp;gt;
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
  -h, --help               help for create
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;NOTE:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For PowerScale, set the &lt;code&gt;quota&lt;/code&gt; to 0 as CSM for Authorization does not enforce quota limits.&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;options-inherited-from-parent-commands-6&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-7&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl role create --from-file roles.json
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl role get &amp;lt;role-name&amp;gt;&lt;/code&gt; to confirm the creation occurred.&lt;/p&gt;
&lt;p&gt;Alternatively, you can create a role in-line using:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl role create --role=role-name=system-type=000000000001=mypool=200000000
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-role-update&#34;&gt;karavictl role update&lt;/h3&gt;
&lt;p&gt;Update the quota of one or more CSM roles&lt;/p&gt;
&lt;h5 id=&#34;synopsis-8&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Updates the quota of one or more CSM roles&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl role update [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-8&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -f, --from-file string   role data from a file
      --role strings       role in the form &amp;lt;name&amp;gt;=&amp;lt;type&amp;gt;=&amp;lt;id&amp;gt;=&amp;lt;pool&amp;gt;=&amp;lt;quota&amp;gt;
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
  -h, --help               help for update
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-7&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-8&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl role update --from-file roles.json
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl role get &amp;lt;role-name&amp;gt;&lt;/code&gt; to confirm the update occurred.&lt;/p&gt;
&lt;p&gt;Alternatively, you can update existing roles in-line using:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl role update --role=role-name=system-type=000000000001=mypool=400000000
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-role-delete&#34;&gt;karavictl role delete&lt;/h3&gt;
&lt;p&gt;Delete role&lt;/p&gt;
&lt;h5 id=&#34;synopsis-9&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Delete role&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl role delete &amp;lt;role-name&amp;gt; [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-9&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for delete
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-8&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-9&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl role delete CSISilver
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl role get &amp;lt;role-name&amp;gt;&lt;/code&gt; to confirm the deletion occurred.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-rolebinding&#34;&gt;karavictl rolebinding&lt;/h3&gt;
&lt;p&gt;Manage role bindings&lt;/p&gt;
&lt;h5 id=&#34;synopsis-10&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Management for role bindings&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl rolebinding [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-10&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for rolebinding
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-9&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-10&#34;&gt;Output&lt;/h5&gt;
&lt;p&gt;Outputs help text&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-rolebinding-create&#34;&gt;karavictl rolebinding create&lt;/h3&gt;
&lt;p&gt;Create a rolebinding between role and tenant&lt;/p&gt;
&lt;h5 id=&#34;synopsis-11&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Creates a rolebinding between role and tenant&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl rolebinding create [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-11&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
  -r, --role string       Role name
  -t, --tenant string     Tenant name
      --insecure boolean  insecure skip verify flag for Helm deployment
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-10&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-11&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl rolebinding create --role CSISilver --tenant Alice
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl tenant get --name &amp;lt;tenant-name&amp;gt;&lt;/code&gt; to confirm the rolebinding creation occurred.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-rolebinding-delete&#34;&gt;karavictl rolebinding delete&lt;/h3&gt;
&lt;p&gt;Delete a rolebinding between role and tenant&lt;/p&gt;
&lt;h5 id=&#34;synopsis-12&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Deletes a rolebinding between role and tenant&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl rolebinding delete [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-12&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
  -r, --role string      Role name
  -t, --tenant string    Tenant name
      --insecure boolean insecure skip verify flag for Helm deployment
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-11&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-12&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl rolebinding delete --role CSISilver --tenant Alice
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl tenant get --name &amp;lt;tenant-name&amp;gt;&lt;/code&gt; to confirm the rolebinding deletion occurred.&lt;/p&gt;
&lt;h2 id=&#34;storage-commands&#34;&gt;Storage Commands&lt;/h2&gt;
&lt;h3 id=&#34;karavictl-storage&#34;&gt;karavictl storage&lt;/h3&gt;
&lt;p&gt;Manage storage systems&lt;/p&gt;
&lt;h5 id=&#34;synopsis-13&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Manages storage systems&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl storage [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-13&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for storage
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-12&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-13&#34;&gt;Output&lt;/h5&gt;
&lt;p&gt;Outputs help text&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-storage-get&#34;&gt;karavictl storage get&lt;/h3&gt;
&lt;p&gt;Get details on a registered storage system.&lt;/p&gt;
&lt;h5 id=&#34;synopsis-14&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Gets details on a registered storage system.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl storage get [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-14&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help               help for get
  -s, --system-id string   System identifier (default &amp;#34;systemid&amp;#34;)
  -t, --type string        Type of storage system (&amp;#34;powerflex&amp;#34;, &amp;#34;powermax&amp;#34;)
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-13&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-14&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl storage get --type powerflex --system-id 3000000000011111
{
  &amp;#34;User&amp;#34;: &amp;#34;admin&amp;#34;,
  &amp;#34;Password&amp;#34;: &amp;#34;(omitted)&amp;#34;,
  &amp;#34;Endpoint&amp;#34;: &amp;#34;https://1.1.1.1&amp;#34;,
  &amp;#34;Insecure&amp;#34;: true
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-storage-list&#34;&gt;karavictl storage list&lt;/h3&gt;
&lt;p&gt;List registered storage systems.&lt;/p&gt;
&lt;h5 id=&#34;synopsis-15&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Lists registered storage systems.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl storage list [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-15&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for list
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-14&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-15&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl storage list

{
  &amp;#34;storage&amp;#34;: {
    &amp;#34;powerflex&amp;#34;: {
      &amp;#34;3000000000011111&amp;#34;: {
        &amp;#34;Endpoint&amp;#34;: &amp;#34;https://1.1.1.1&amp;#34;,
        &amp;#34;Insecure&amp;#34;: true,
        &amp;#34;Password&amp;#34;: &amp;#34;(omitted)&amp;#34;,
        &amp;#34;User&amp;#34;: &amp;#34;admin&amp;#34;
      }
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-storage-create&#34;&gt;karavictl storage create&lt;/h3&gt;
&lt;p&gt;Create and register a storage system.&lt;/p&gt;
&lt;h5 id=&#34;synopsis-16&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Creates and registers a storage system.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl storage create [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-16&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -e, --endpoint string    Endpoint of REST API gateway
  -h, --help               help for create
  -a, --array-insecure     Array insecure skip verify
  -p, --password string    Password (default &amp;#34;****&amp;#34;)
  -s, --system-id string   System identifier (default &amp;#34;systemid&amp;#34;)
  -t, --type string        Type of storage system (&amp;#34;powerflex&amp;#34;, &amp;#34;powermax&amp;#34;)
  -u, --user string        Username (default &amp;#34;admin&amp;#34;)
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-15&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-16&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl storage create --endpoint https://1.1.1.1 --insecure --array-insecure --system-id 3000000000011111 --type powerflex --user admin --password ********
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl storage get --type &amp;lt;storage-system-type&amp;gt; --system-id &amp;lt;storage-system-id&amp;gt;&lt;/code&gt; to confirm the creation occurred.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-storage-update&#34;&gt;karavictl storage update&lt;/h3&gt;
&lt;p&gt;Update a registered storage system.&lt;/p&gt;
&lt;h5 id=&#34;synopsis-17&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Updates a registered storage system.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl storage update [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-17&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -e, --endpoint string    Endpoint of REST API gateway
  -h, --help               help for update
  -a, --array-insecure     Array insecure skip verify
  -p, --pass string        Password (default &amp;#34;****&amp;#34;)
  -s, --system-id string   System identifier (default &amp;#34;systemid&amp;#34;)
  -t, --type string        Type of storage system (&amp;#34;powerflex&amp;#34;, &amp;#34;powermax&amp;#34;)
  -u, --user string        Username (default &amp;#34;admin&amp;#34;)
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-16&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-17&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl storage update --endpoint https://1.1.1.1 --insecure --array-insecure --system-id 3000000000011111 --type powerflex --user admin --password ********
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl storage get --type &amp;lt;storage-system-type&amp;gt; --system-id &amp;lt;storage-system-id&amp;gt;&lt;/code&gt; to confirm the update occurred.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-storage-delete&#34;&gt;karavictl storage delete&lt;/h3&gt;
&lt;p&gt;Delete a registered storage system.&lt;/p&gt;
&lt;h5 id=&#34;synopsis-18&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Deletes a registered storage system.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl storage delete [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-18&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help               help for delete
  -s, --system-id string   System identifier (default &amp;#34;systemid&amp;#34;)
  -t, --type string        Type of storage system (&amp;#34;powerflex&amp;#34;, &amp;#34;powermax&amp;#34;)
      --insecure           insecure skip verify flag for Helm deployment
      --addr               address of the container for Helm deployment (pod:port)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-17&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-18&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl storage delete --type powerflex --system-id 3000000000011111
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl storage get --type &amp;lt;storage-system-type&amp;gt; --system-id &amp;lt;storage-system-id&amp;gt;&lt;/code&gt; to confirm the deletion occurred.&lt;/p&gt;
&lt;h2 id=&#34;tenant-commands&#34;&gt;Tenant Commands&lt;/h2&gt;
&lt;h3 id=&#34;karavictl-tenant&#34;&gt;karavictl tenant&lt;/h3&gt;
&lt;p&gt;Manage tenants&lt;/p&gt;
&lt;h5 id=&#34;synopsis-19&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Management for tenants&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl tenant [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-19&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for tenant
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-18&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-19&#34;&gt;Output&lt;/h5&gt;
&lt;p&gt;Outputs help text&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-tenant-create&#34;&gt;karavictl tenant create&lt;/h3&gt;
&lt;p&gt;Create a tenant resource within CSM&lt;/p&gt;
&lt;h5 id=&#34;synopsis-20&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Creates a tenant resource within CSM&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl tenant create [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-20&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
  -n, --name string   Tenant name
      --insecure      insecure skip verify flag for Helm deployment
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-19&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-20&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl tenant create --name Alice
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl tenant get --name &amp;lt;tenant-name&amp;gt;&lt;/code&gt; to confirm the creation occurred.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-tenant-get&#34;&gt;karavictl tenant get&lt;/h3&gt;
&lt;p&gt;Get a tenant resource within CSM&lt;/p&gt;
&lt;h5 id=&#34;synopsis-21&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Gets a tenant resource and its assigned roles within CSM&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl tenant get [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-21&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
  -n, --name string   Tenant name
      --insecure      insecure skip verify flag for Helm deployment
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-20&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-21&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl tenant get --name Alice

{
  &amp;#34;name&amp;#34;: &amp;#34;Alice&amp;#34;
  &amp;#34;roles&amp;#34;: &amp;#34;role-1,role-2&amp;#34;
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-tenant-list&#34;&gt;karavictl tenant list&lt;/h3&gt;
&lt;p&gt;Lists tenant resources within CSM&lt;/p&gt;
&lt;h5 id=&#34;synopsis-22&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Lists tenant resources within CSM&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl tenant list [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-22&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
      --insecure      insecure skip verify flag for Helm deployment
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-21&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-22&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl tenant list

{
  &amp;#34;tenants&amp;#34;: [
    {
      &amp;#34;name&amp;#34;: &amp;#34;Alice&amp;#34;
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id=&#34;karavictl-tenant-revoke&#34;&gt;karavictl tenant revoke&lt;/h3&gt;
&lt;p&gt;Revokes access for a tenant&lt;/p&gt;
&lt;h5 id=&#34;synopsis-23&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Revokes access to storage resources for a tenant&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl tenant revoke [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-23&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
  -n, --name string   Tenant name
      --insecure      insecure skip verify flag for Helm deployment
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-22&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-23&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl tenant revoke --name Alice
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-tenant-delete&#34;&gt;karavictl tenant delete&lt;/h3&gt;
&lt;p&gt;Deletes a tenant resource within CSM&lt;/p&gt;
&lt;h5 id=&#34;synopsis-24&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Deletes a tenant resource within CSM&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl tenant delete [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-24&#34;&gt;Options&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
  -n, --name string   Tenant name
      --insecure      insecure skip verify flag for Helm deployment
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-23&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-24&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl tenant delete --name Alice
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl tenant get --name &amp;lt;tenant-name&amp;gt;&lt;/code&gt; to confirm the deletion occurred.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;karavictl-tenant-update&#34;&gt;karavictl tenant update&lt;/h3&gt;
&lt;p&gt;Updates a tenant&amp;rsquo;s resource within CSM&lt;/p&gt;
&lt;h5 id=&#34;synopsis-25&#34;&gt;Synopsis&lt;/h5&gt;
&lt;p&gt;Updates a tenant resource within CSM&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;karavictl tenant update [flags]
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;options-25&#34;&gt;Options&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  -h, --help   help for create
  -n, --name string   Tenant name
      --approvesdc boolean (Usage: --approvesdc=true/false | This flag is only applicable to PowerFlex. This flag will Approve/Deny a tenant&amp;#39;s SDC request )
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;options-inherited-from-parent-commands-24&#34;&gt;Options inherited from parent commands&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      --addr string     Address of the server (default &amp;#34;localhost:443&amp;#34;)
      --config string   config file (default is $HOME/.karavictl.yaml)
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;output-25&#34;&gt;Output&lt;/h5&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl tenant update --name Alice --approvesdc=false
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On success, there will be no output. You may run &lt;code&gt;karavictl tenant get --name &amp;lt;tenant-name&amp;gt;&lt;/code&gt; to confirm the update was persisted.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>V3: Troubleshooting</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/troubleshooting/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/troubleshooting/</guid>
      <description>
        
        
        

&lt;div class=&#34;pageinfo pageinfo-primary&#34;&gt;
&lt;p&gt;The CSM Authorization karavictl CLI is no longer actively maintained or supported. It will be deprecated in CSM 2.0.&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id=&#34;rpm-deployment&#34;&gt;RPM Deployment&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/troubleshooting/#The-Failure-of-Building-an-Authorization-RPM&#34;&gt;The Failure of Building an Authorization RPM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/troubleshooting/#running-karavictl-tenant-commands-result-in-an-http-504-error&#34;&gt;Running &lt;code&gt;karavictl tenant&lt;/code&gt; commands result in an HTTP 504 error&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/troubleshooting/#installation-fails-to-install-policies&#34;&gt;Installation fails to install policies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/troubleshooting/#after-installation-the-create-pvc-pod-is-in-an-error-state&#34;&gt;After installation, the create-pvc Pod is in an Error state&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;helm-deployment&#34;&gt;Helm Deployment&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dell.github.io/csm-docs/csm-docs/v3/authorization/troubleshooting/#the-csi-driver-for-dell-powerflex-v230-is-in-an-error-or-crashloopbackoff-state-due-to-request-denied-for-path-errors&#34;&gt;The CSI Driver for Dell PowerFlex v2.3.0 is in an Error or CrashLoopBackoff state due to &amp;ldquo;request denied for path&amp;rdquo; errors&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;the-failure-of-building-an-authorization-rpm&#34;&gt;The Failure of Building an Authorization RPM&lt;/h3&gt;
&lt;p&gt;This response occurs when running &amp;lsquo;make rpm&amp;rsquo; without the proper permissions or correct pathing of the Authorization repository.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Error response from daemon: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: error mounting &amp;#34;/root/karavi-authorization/bin/deploy&amp;#34; to rootfs at &amp;#34;/home/builder/rpm/deploy&amp;#34;: mount /root/karavi-authorization/bin/deploy:/home/builder/rpm/deploy (via /proc/self/fd/6), flags: 0x5000: not a directory: unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type.ERRO[0001] error waiting for container: context canceled 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Resolution&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ensure the cloned repository is in a folder independent of the root or home directory.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/root/myrepos/karavi-authorization
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Enable appropriate permissions to the RPM folder (this is where the Authorization RPM is located after being built).&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chmod o+rwx deploy/rpm
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;retrieve-csm-authorization-server-logs&#34;&gt;Retrieve CSM Authorization Server Logs&lt;/h3&gt;
&lt;p&gt;To retrieve logs from services on the CSM Authorization Server, run the following command (e.g proxy-server logs):&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ k3s kubectl logs deploy/proxy-server -n karavi -c proxy-server
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;For OPA related logs, run:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ k3s kubectl logs deploy/proxy-server -n karavi -c opa
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;running-karavictl-tenant-commands-result-in-an-http-504-error&#34;&gt;Running &amp;ldquo;karavictl tenant&amp;rdquo; commands result in an HTTP 504 error&lt;/h3&gt;
&lt;p&gt;This situation may occur if there are Iptables or other firewall rules preventing communication with the provided &lt;code&gt;&amp;lt;grpc-address&amp;gt;&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ karavictl tenant list --addr &amp;lt;grpc-address&amp;gt;
{
  &amp;#34;ErrorMsg&amp;#34;: &amp;#34;rpc error: code = Unavailable desc = Gateway Timeout: HTTP status code 504; 
  transport: received the unexpected content-type \&amp;#34;text/plain; charset=utf-8\&amp;#34;&amp;#34;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Resolution&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Consult with your system administrator or Iptables/firewall documentation. If there are rules in place to
prevent communication with the &lt;code&gt;&amp;lt;grpc-address&amp;gt;&lt;/code&gt;, either new rules must be created or existing rules must be updated.&lt;/p&gt;
&lt;h3 id=&#34;installation-fails-to-install-policies&#34;&gt;Installation fails to install policies&lt;/h3&gt;
&lt;p&gt;If SELinux is enabled, the policies may fail to install:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;error: failed to install policies (see /tmp/policy-install-for-karavi3163047435): exit status 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Resolution&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This issue should only occur with older versions of CSM Authorization. If your system is encountering this issue, upgrade to version 1.5.0 or above.&lt;/p&gt;
&lt;h3 id=&#34;after-installation-the-create-pvc-pod-is-in-an-error-state&#34;&gt;After installation, the create-pvc Pod is in an Error state&lt;/h3&gt;
&lt;p&gt;If SELinux is enabled, the create-pvc Pod may be in an Error state:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;kube-system    create-pvc-44a763c7-e70f-4e32-a114-e94615041042   0/1     Error       0          102s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Resolution&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Run the following commands to allow the PVC to be created:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ semanage fcontext -a -t container_file_t  &amp;#34;/var/lib/rancher/k3s/storage(/.*)?&amp;#34;
$ restorecon -R  /var/lib/rancher/k3s/storage/
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;the-csi-driver-for-dell-powerflex-v230-is-in-an-error-or-crashloopbackoff-state-due-to-request-denied-for-path-errors&#34;&gt;The CSI Driver for Dell PowerFlex v2.3.0 is in an Error or CrashLoopBackoff state due to &amp;ldquo;request denied for path&amp;rdquo; errors&lt;/h3&gt;
&lt;p&gt;The vxflexos-controller pods will have logs similar to:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;time=&amp;#34;2022-06-30T17:35:03Z&amp;#34; level=error msg=&amp;#34;failed to list vols for array 2d6fb7c6370a990f : rpc error: code = Internal desc = Unable to list volumes: request denied for path &amp;#34; error=&amp;#34;rpc error: code = Internal desc = Unable to list volumes: request denied for path&amp;#34;
time=&amp;#34;2022-06-30T17:35:03Z&amp;#34; level=error msg=&amp;#34;array 2d6fb7c6370a990f probe failed: failed to list vols for array 2d6fb7c6370a990f : rpc error: code = Internal desc = Unable to list volumes: request denied for path &amp;#34;
...
time=&amp;#34;2022-06-30T17:35:03Z&amp;#34; level=fatal msg=&amp;#34;grpc failed&amp;#34; error=&amp;#34;rpc error: code = FailedPrecondition desc = All arrays are not working. Could not proceed further: map[2d6fb7c6370a990f:failed to list vols for array 2d6fb7c6370a990f : rpc error: code = Internal desc = Unable to list volumes: request denied for path ]&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The vxflexos-node pods will have logs similar to:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;time=&amp;#34;2022-06-30T17:38:32Z&amp;#34; level=error msg=&amp;#34;failed to list vols for array 2d6fb7c6370a990f : rpc error: code = Internal desc = Unable to list volumes: request denied for path &amp;#34; error=&amp;#34;rpc error: code = Internal desc = Unable to list volumes: request denied for path&amp;#34;
time=&amp;#34;2022-06-30T17:38:32Z&amp;#34; level=error msg=&amp;#34;array 2d6fb7c6370a990f probe failed: failed to list vols for array 2d6fb7c6370a990f : rpc error: code = Internal desc = Unable to list volumes: request denied for path &amp;#34;
...
time=&amp;#34;2022-06-30T17:38:32Z&amp;#34; level=fatal msg=&amp;#34;grpc failed&amp;#34; error=&amp;#34;rpc error: code = FailedPrecondition desc = All arrays are not working. Could not proceed further: map[2d6fb7c6370a990f:failed to list vols for array 2d6fb7c6370a990f : rpc error: code = Internal desc = Unable to list volumes: request denied for path ]&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This occurs when the CSM Authorization proxy-server does not allow all driver HTTPS request paths.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Resolution&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Edit the &lt;code&gt;powerflex-urls&lt;/code&gt; configMap in the namespace where CSM Authorization is deployed to allow all request paths by default.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;kubectl -n &amp;lt;namespace&amp;gt; edit configMap powerflex-urls
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;In the &lt;code&gt;data&lt;/code&gt; field, navigate towards the bottom of this field where you see &lt;code&gt;default allow = false&lt;/code&gt;. This is highlighted in &lt;strong&gt;bold&lt;/strong&gt; in the example below. Replace &lt;code&gt;false&lt;/code&gt; with &lt;code&gt;true&lt;/code&gt; and save the edit.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
data:
  url.rego: &#34;# Copyright Â© 2022 Dell Inc., or its subsidiaries. All Rights Reserved.\n#\n#
    Licensed under the Apache License, Version 2.0 (the \&#34;License\&#34;);\n# you may not
    use this file except in compliance with the License.\n# You may obtain a copy
    of the License at\n#\n#     http:#www.apache.org/licenses/LICENSE-2.0\n#\n# Unless
    required by applicable law or agreed to in writing, software\n# distributed under
    the License is distributed on an \&#34;AS IS\&#34; BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS
    OF ANY KIND, either express or implied.\n# See the License for the specific language
    governing permissions and\n# limitations under the License.\n\npackage karavi.authz.url\n\nallowlist
    = [\n    \&#34;GET /api/login/\&#34;,\n\t\t\&#34;POST /proxy/refresh-token/\&#34;,\n\t\t\&#34;GET
    /api/version/\&#34;,\n\t\t\&#34;GET /api/types/System/instances/\&#34;,\n\t\t\&#34;GET /api/types/StoragePool/instances/\&#34;,\n\t\t\&#34;POST
    /api/types/Volume/instances/\&#34;,\n\t\t\&#34;GET /api/instances/Volume::[a-f0-9]+/$\&#34;,\n\t\t\&#34;POST
    /api/types/Volume/instances/action/queryIdByKey/\&#34;,\n\t\t\&#34;GET /api/instances/System::[a-f0-9]+/relationships/Sdc/\&#34;,\n\t\t\&#34;GET
    /api/instances/Sdc::[a-f0-9]+/relationships/Statistics/\&#34;,\n\t\t\&#34;GET /api/instances/Sdc::[a-f0-9]+/relationships/Volume/\&#34;,\n\t\t\&#34;GET
    /api/instances/Volume::[a-f0-9]+/relationships/Statistics/\&#34;,\n\t\t\&#34;GET /api/instances/StoragePool::[a-f0-9]+/relationships/Statistics/\&#34;,\n\t\t\&#34;POST
    /api/instances/Volume::[a-f0-9]+/action/addMappedSdc/\&#34;,\n\t\t\&#34;POST /api/instances/Volume::[a-f0-9]+/action/removeMappedSdc/\&#34;,\n\t\t\&#34;POST
    /api/instances/Volume::[a-f0-9]+/action/removeVolume/\&#34;\n]\n\n&lt;b&gt;default allow =
    false&lt;/b&gt;\nallow {\n\tregex.match(allowlist[_], sprintf(\&#34;%s %s\&#34;, [input.method,
    input.url]))\n}\n&#34;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Edited data:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
data:
  url.rego: &#34;# Copyright Â© 2022 Dell Inc., or its subsidiaries. All Rights Reserved.\n#\n#
    Licensed under the Apache License, Version 2.0 (the \&#34;License\&#34;);\n# you may not
    use this file except in compliance with the License.\n# You may obtain a copy
    of the License at\n#\n#     http:#www.apache.org/licenses/LICENSE-2.0\n#\n# Unless
    required by applicable law or agreed to in writing, software\n# distributed under
    the License is distributed on an \&#34;AS IS\&#34; BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS
    OF ANY KIND, either express or implied.\n# See the License for the specific language
    governing permissions and\n# limitations under the License.\n\npackage karavi.authz.url\n\nallowlist
    = [\n    \&#34;GET /api/login/\&#34;,\n\t\t\&#34;POST /proxy/refresh-token/\&#34;,\n\t\t\&#34;GET
    /api/version/\&#34;,\n\t\t\&#34;GET /api/types/System/instances/\&#34;,\n\t\t\&#34;GET /api/types/StoragePool/instances/\&#34;,\n\t\t\&#34;POST
    /api/types/Volume/instances/\&#34;,\n\t\t\&#34;GET /api/instances/Volume::[a-f0-9]+/$\&#34;,\n\t\t\&#34;POST
    /api/types/Volume/instances/action/queryIdByKey/\&#34;,\n\t\t\&#34;GET /api/instances/System::[a-f0-9]+/relationships/Sdc/\&#34;,\n\t\t\&#34;GET
    /api/instances/Sdc::[a-f0-9]+/relationships/Statistics/\&#34;,\n\t\t\&#34;GET /api/instances/Sdc::[a-f0-9]+/relationships/Volume/\&#34;,\n\t\t\&#34;GET
    /api/instances/Volume::[a-f0-9]+/relationships/Statistics/\&#34;,\n\t\t\&#34;GET /api/instances/StoragePool::[a-f0-9]+/relationships/Statistics/\&#34;,\n\t\t\&#34;POST
    /api/instances/Volume::[a-f0-9]+/action/addMappedSdc/\&#34;,\n\t\t\&#34;POST /api/instances/Volume::[a-f0-9]+/action/removeMappedSdc/\&#34;,\n\t\t\&#34;POST
    /api/instances/Volume::[a-f0-9]+/action/removeVolume/\&#34;\n]\n\n&lt;b&gt;default allow =
    true&lt;/b&gt;\nallow {\n\tregex.match(allowlist[_], sprintf(\&#34;%s %s\&#34;, [input.method,
    input.url]))\n}\n&#34;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Rollout restart the CSM Authorization proxy-server so the policy change gets applied.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;kubectl -n &amp;lt;namespace&amp;gt; rollout restart deploy/proxy-server
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Optionally, rollout restart the CSI Driver for Dell PowerFlex to restart the driver pods. Alternatively, wait for the Kubernetes CrashLoopBackoff behavior to restart the driver.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;kubectl -n &amp;lt;driver-namespace&amp;gt; rollout restart deploy/vxflexos-controller
kubectl -n &amp;lt;driver-namespace&amp;gt; rollout restart daemonSet/vxflexos-node
&lt;/code&gt;&lt;/pre&gt;
      </description>
    </item>
    
    <item>
      <title>V3: Release notes</title>
      <link>https://dell.github.io/csm-docs/v3/authorization/release/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://dell.github.io/csm-docs/v3/authorization/release/</guid>
      <description>
        
        
        &lt;h2 id=&#34;release-notes---csm-authorization-160&#34;&gt;Release Notes - CSM Authorization 1.6.0&lt;/h2&gt;
&lt;h3 id=&#34;new-featureschanges&#34;&gt;New Features/Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Restrict the version of TLS to v1.2 for all requests to CSM authorization proxy server. (&lt;a href=&#34;https://github.com/dell/csm/issues/642&#34;&gt;#642&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;PowerFlex preapproved GUIDs. (&lt;a href=&#34;https://github.com/dell/csm/issues/402&#34;&gt;#402&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;CSM 1.6 release specific changes. (&lt;a href=&#34;https://github.com/dell/csm/issues/583&#34;&gt;#583&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;bugs&#34;&gt;Bugs&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;CSM Authorization quota of zero should allow infinite use for PowerFlex and PowerMax. (&lt;a href=&#34;https://github.com/dell/csm/issues/654&#34;&gt;#654&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;CSM Authorization CRD in the CSM Operator doesn&amp;rsquo;t read custom configurations. (&lt;a href=&#34;https://github.com/dell/csm/issues/633&#34;&gt;#633&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
  </channel>
</rss>
